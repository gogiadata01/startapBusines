<app-navbar-with-wave />
<section class="bottom" *ngIf="!quizStarted">
  <div class="background">
    <div class="overlay">
      <div class="top">
        <div class="calendar">
          <svg
            id="calendarsvg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 350"
            preserveAspectRatio="xMidYMid meet"
          >
            <!-- Upper lines with 50px height and spacing between them -->
            <line
              x1="60"
              y1="0"
              x2="60"
              y2="50"
              stroke="white"
              stroke-width="2"
            />
            <line
              x1="120"
              y1="0"
              x2="120"
              y2="50"
              stroke="white"
              stroke-width="2"
            />

            <rect
              x="10"
              y="50"
              rx="20"
              ry="20"
              width="180"
              height="120"
              fill="#e0e0e0"
              stroke="gray"
              stroke-width="1"
            />

            <!-- Top Text -->
            <text
              x="50%"
              y="80"
              font-size="16"
              font-family="Arial"
              fill="black"
              text-anchor="middle"
              dominant-baseline="middle"
            >
              დაწყების დრო
            </text>

            <!-- Horizontal Line -->
            <line
              x1="30"
              y1="100"
              x2="170"
              y2="100"
              stroke="black"
              stroke-width="1"
            />

            <!-- Time Text -->
            <text
              x="50%"
              y="130"
              font-size="20"
              font-family="Arial"
              fill="black"
              text-anchor="middle"
              dominant-baseline="middle"
            >
              {{ quiz?.time }}
            </text>

            <!-- Year Text -->
            <text
              x="50%"
              y="155"
              font-size="18"
              font-family="Arial"
              fill="orange"
              text-anchor="middle"
              dominant-baseline="middle"
            ></text>
          </svg>
        </div>
      </div>
      <div class="Footer">
        <div class="time">
          <p>დაწყების დრო</p>
          <p>{{ quiz?.time }}</p>
        </div>
        <div class="start">
          <Button (click)="startQuiz()" [disabled]="!quiz">დაწყება</Button>
        </div>
        <div class="endtime">
          <p>დარჩენილი დრო</p>
          <div *ngIf="quiz">
            <p>9 წუთი</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- <div *ngIf="quizStarted" class="quizcontainer">
  <div *ngIf="!isLoading && quiz?.questions?.length" class="quiz-container">
    <div class="header row">
      <div class="col-lg-3 score">სწორი: {{ correctAnswersCount }}</div>
      <div class="col-lg-3 progress">
        კითხვა {{ currentQuestionIndex + 1 }} / {{ quiz?.questions?.length }}
      </div>
      <div class="col-lg-3 status">არასწორი: {{ incorrectAnswersCount }}</div>
      <div class="col-lg-3 timer">
        დარჩენილი დრო: {{ formatTime(timeLeftForQuiz) }}
      </div>
    </div>

    <div class="question">
      <h5 *ngIf="!isBonusQuestion">
        {{ quiz?.questions?.[currentQuestionIndex]?.question }}?
      </h5>
      <h3 *ngIf="isBonusQuestion">
        ბონუს კითხვა {{ bonusQuestion?.question }}?
      </h3>
    </div>

    <div class="answers">
      <div class="row">
        <div
          class="col-lg-8 m-auto"
          *ngFor="let answer of allAnswers; let i = index"
        >
          <button
            class="answer"
            [class.selected]="
              selectedAnswers[currentQuestionIndex] === answer ||
              bonusAnswerSelected === answer
            "
            (click)="selectAnswer(answer)"
            style="margin: 10px 0; padding: 10px; width: 100%"
          >
            <p>{{ answer }}</p>
          </button>
        </div>
      </div>
    </div>

    <div class="nextBtn">
      <button
        (click)="nextQuestion()"
        [disabled]="
          !selectedAnswers[currentQuestionIndex] && !bonusAnswerSelected
        "
        style="margin-top: 20px"
      >
        {{ isBonusQuestion ? "Finish Quiz" : "Next" }}
      </button>
    </div>

    <p>
      შენი არჩეული პასუხია:
      {{
        isBonusQuestion
          ? bonusAnswerSelected
          : selectedAnswers[currentQuestionIndex]
      }}
    </p>
  </div>

  <div *ngIf="quizCompleted" class="results-container">
    <h3>Quiz Completed!</h3>
    <p>Correct Answers: {{ correctAnswersCount }}</p>
    <p>Incorrect Answers: {{ incorrectAnswersCount }}</p>
    <button (click)="showCompletionAlert()">View Results</button>
  </div>
</div>

<div class="mainfooter">
  <app-footer-for-pupil />
</div> -->


<div *ngIf="quizStarted" class="quizcontainer">
  <!-- Quiz container -->
  <div *ngIf="!isLoading && quiz?.questions?.length" class="quiz-container">
    <!-- Header section displaying scores and remaining time -->
    <div class="header row">
      <div class="col-lg-3 score">სწორი: {{ correctAnswersCount }}</div>
      <div class="col-lg-3 progress">
        კითხვა {{ currentQuestionIndex + 1 }} / {{ quiz?.questions?.length }}
      </div>
      <div class="col-lg-3 status">არასწორი: {{ incorrectAnswersCount }}</div>
      <div class="col-lg-3 timer">
        დარჩენილი დრო: {{ formatTime(timeLeftForQuiz) }}
      </div>
    </div>

    <!-- Question display (main or bonus question) -->
    <div class="question">
      <h5 *ngIf="!isBonusQuestion">
        {{ quiz?.questions?.[currentQuestionIndex]?.question }}?
      </h5>
      <h3 *ngIf="isBonusQuestion">
        ბონუს კითხვა {{ bonusQuestion?.question }}?
      </h3>
    </div>

    <!-- Answers section -->
    <div class="answers">
      <div class="row">
        <div
          class="col-lg-8 m-auto"
          *ngFor="let answer of allAnswers; let i = index"
        >
          <button
            class="answer"
            [class.selected]="
              selectedAnswers[currentQuestionIndex] === answer ||
              bonusAnswerSelected === answer
            "
            (click)="selectAnswer(answer)"
            style="margin: 10px 0; padding: 10px; width: 100%"
          >
            <p>{{ answer }}</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Button to move to the next question -->
    <div class="nextBtn">
      <button
        (click)="nextQuestion()"
        [disabled]="
          !selectedAnswers[currentQuestionIndex] && !bonusAnswerSelected
        "
        style="margin-top: 20px"
      >
        {{ isBonusQuestion ? "Finish Quiz" : "Next" }}
      </button>
    </div>

    <!-- Displaying selected answer -->
    <p>
      შენი არჩეული პასუხია:
      {{
        isBonusQuestion
          ? bonusAnswerSelected
          : selectedAnswers[currentQuestionIndex]
      }}
    </p>
  </div>

  <!-- Displaying the quiz completion message -->
  <div *ngIf="quizCompleted" class="results-container">
    <h3>Quiz Completed!</h3>
    <p>Correct Answers: {{ correctAnswersCount }}</p>
    <p>Incorrect Answers: {{ incorrectAnswersCount }}</p>
    <button (click)="showCompletionAlert()">View Results</button>
  </div>
</div>

<!-- Footer Section -->
<div class="mainfooter">
  <app-footer-for-pupil />
</div>